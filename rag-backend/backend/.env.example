# ============================================================================
# RAG Backend 环境变量配置示例
# ============================================================================
# 使用说明: 复制此文件为 .env 并填写实际配置值
# cp .env.example .env

# ============================================================================
# 数据库配置 - MySQL (业务数据存储)
# ============================================================================
# MySQL连接字符串格式: mysql+pymysql://用户名:密码@主机:端口/数据库名
DB_URL=mysql+pymysql://<你的MySQL用户名>:<你的MySQL密码>@<主机地址>:<端口>/<数据库名>



# ============================================================================
# API密钥配置
# ============================================================================
# 阿里云DashScope API密钥 (必需 - 用于通义千问模型)
DASHSCOPE_API_KEY="<你的阿里云DashScope API密钥>"

# LLM模型配置
LLM_DASHSCOPE_API_KEY="<你的阿里云DashScope API密钥>"
LLM_DASHSCOPE_API_BASE="https://dashscope.aliyuncs.com/compatible-mode/v1"
LLM_DASHSCOPE_CHAT_MODEL="qwen-plus"

# 向量模型配置
VECTOR_DASHSCOPE_API_KEY="<你的阿里云DashScope API密钥>"
VECTOR_DASHSCOPE_API_BASE="https://dashscope.aliyuncs.com/compatible-mode/v1"
VECTOR_DASHSCOPE_EMBEDDING_MODEL="text-embedding-v4"

# MinerU OCR服务配置 (可选 - 用于文档OCR识别)
MINERU_API_URL="https://mineru.net/api/v4"
MINERU_API_KEY="<你的MinerU API密钥>"

# DeepSeek API密钥 (可选 - 如使用DeepSeek模型)
DEEPSEEK_API_KEY="<你的DeepSeek API密钥>"

# ============================================================================
# 向量数据库配置 - Milvus
# ============================================================================
# Milvus URI格式: http://host:port 或 https://host:port
MILVUS_URI=http://<Milvus主机地址>:19530
MILVUS_DB_NAME=default
# Collection名称由系统自动生成,格式: kb{library_id}_{timestamp_ms}
# MILVUS_COLLECTION_NAME=<自定义Collection名称>

# ============================================================================
# 图数据库配置 - LightRAG
# ============================================================================
# LightRAG工作目录 (存储图数据)
LIGHTRAG_WORKSPACE=<你的LightRAG工作目录绝对路径>

# ============================================================================
# 对象存储配置 - 腾讯云COS
# ============================================================================
COS_SECRET_ID='<你的腾讯云COS SecretId>'
COS_SECRET_KEY='<你的腾讯云COS SecretKey>'
COS_REGION='<COS存储桶地域，如ap-beijing>'
# 存储桶名称格式: bucket-appid，如 ragagent-file-1234567890
COS_BUCKET_NAME='<你的COS存储桶名称>'

# ============================================================================
# JWT认证配置
# ============================================================================
# JWT密钥 (必需 - 建议使用强随机字符串)
JWT_SECRET_KEY="<你的JWT密钥，建议生成随机强字符串>"

# JWT算法
JWT_ALGORITHM=HS256

# Access Token过期时间 (秒) - 默认24小时
JWT_ACCESS_TOKEN_EXPIRES=86400

# Refresh Token过期时间 (秒) - 默认7天
JWT_REFRESH_TOKEN_EXPIRES=604800

# ============================================================================
# Redis配置 (可选 - 用于缓存)
# ============================================================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=<你的Redis密码，无则留空>

# ============================================================================
# 应用配置
# ============================================================================
# 应用运行模式 (development/production)
APP_ENV=development

# 日志级别 (DEBUG/INFO/WARNING/ERROR)
LOG_LEVEL=INFO

# FastAPI服务配置
API_HOST=0.0.0.0
API_PORT=8000

# ============================================================================
# LangGraph配置
# ============================================================================
# 是否启用Checkpoint (生产环境建议启用)
LANGGRAPH_ENABLE_CHECKPOINT=true

# LangGraph Studio调试模式 (仅开发环境使用)
LANGGRAPH_STUDIO_MODE=false

# ============================================================================
# 文档处理配置
# ============================================================================
# 文档切块大小
CHUNK_SIZE=1000

# 文档切块重叠大小
CHUNK_OVERLAP=200

# 最大文档大小 (MB)
MAX_DOCUMENT_SIZE=50

# ============================================================================
# 检索配置
# ============================================================================
# 默认检索模式 (vector_only/graph_only/auto/no_retrieval)
DEFAULT_RETRIEVAL_MODE=auto

# 向量检索TopK数量
VECTOR_SEARCH_TOP_K=5

# 图检索模式 (local/global/hybrid)
GRAPH_SEARCH_MODE=hybrid

# ============================================================================
# LightRAG存储配置
# ============================================================================
# 图存储类型 (NetworkXStorage=内存/文件, Neo4JStorage=Neo4j数据库)
LIGHTRAG_GRAPH_STORAGE=NetworkXStorage

# KV存储类型 (PGKVStorage=PostgreSQL)
LIGHTRAG_KV_STORAGE=PGKVStorage

# 文档状态存储类型 (PGDocStatusStorage=PostgreSQL)
LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage

# 向量存储类型 (MilvusVectorDBStorage=Milvus)
LIGHTRAG_VECTOR_STORAGE=MilvusVectorDBStorage

# 向量维度 (text-embedding-v4使用1024维)
EMBEDDING_DIM=1024

# ============================================================================
# 搜索引擎配置
# ============================================================================
# Tavily搜索引擎API密钥
TAVILY_API_KEY='<你的Tavily API密钥>'